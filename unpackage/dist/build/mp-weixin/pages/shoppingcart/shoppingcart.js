(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shoppingcart/shoppingcart"],{"065a":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",[a("view",{staticClass:"cashMian"},[a("view",{staticClass:"title"},[a("text",{staticStyle:{"margin-left":"52.083333rpx"}},[t._v("结算")]),a("text",{staticStyle:{float:"right","margin-right":"20.833333rpx"},attrs:{eventid:"3613cfe6-0"},on:{click:t.close}},[t._v("取消")])]),a("view",{staticClass:"cashboby"},[null!=t.total?a("view",{staticClass:"matop",staticStyle:{"font-size":"29.166666rpx",color:"#333333"}},[t._v("待收金额："+t._s(t.total.init_money))]):t._e(),a("view",{staticClass:"matop"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amountChange,expression:"amountChange"}],staticStyle:{width:"100%",height:"81.25rpx",border:"1px solid #999999","border-radius":"4.166666rpx"},attrs:{type:"number",eventid:"3613cfe6-1"},domProps:{value:t.amountChange},on:{input:function(e){e.target.composing||(t.amountChange=e.target.value)}}})]),a("view",{staticClass:"matop",staticStyle:{"font-size":"29.166666rpx",color:"#333333"}},[t.theAmount>0?a("text",[t._v("找零")]):a("text",[t._v("未支付")]),t._v("："),t.theAmount>0?a("text",{staticStyle:{color:"#f96c1d"}},[t._v("¥"+t._s(t.theAmount))]):a("text",{staticStyle:{color:"#f96c1d"}},[t._v("¥"+t._s(-t.theAmount))])]),a("view",{staticClass:"matop"},[a("button",{staticStyle:{color:"#ffffff","font-size":"29.166666rpx",border:"none",width:"100%",height:"81.25rpx","background-image":"linear-gradient(-180deg, #fdab3e 0%, #fd803e 97%)","border-radius":"4.166666rpx"},attrs:{eventid:"3613cfe6-2"},on:{click:t.cashpay}},[t._v("完成")])],1)])]),a("view",{staticClass:"cashChe",attrs:{eventid:"3613cfe6-3"},on:{click:t.close}}),a("xyDialog",{attrs:{title:"状态",content:"支付成功!欢迎下次光临~",show:t.showDialog_1,isShowCancel:!1,eventid:"3613cfe6-4",mpcomid:"3613cfe6-0"},on:{confirmButton:function(e){t.clickConfirm(1)}}})],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},"0a9b":function(t,e,a){},"0eb6":function(t,e,a){"use strict";var i=a("448f"),n=a.n(i);n.a},1080:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{show:!1}},computed:{freedata:function(){return this.$store.state.mian.couponing}},methods:{close:function(){this.$store.commit("mian/couponingshow",!1),t.redirectTo({url:"../index/index"})}},mounted:function(){}};e.default=a}).call(this,a("543d")["default"])},1659:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{title:{type:String,default:""},content:String,textalign:{type:String,default:"center"},cancelText:{type:String,default:"取消"},cancelColor:{type:String,default:"#909399"},confirmText:{type:String,default:"确定"},confirmColor:{type:String,default:"#409EFF"},isShowCancel:{type:Boolean,default:!0},show:{type:Boolean,default:!1}},data:function(){return{isShow:!1}},watch:{show:function(t){this.isShow=t}},methods:{bindTouchmove:function(){},clickCancel:function(){var t=this;setTimeout(function(){t.$emit("cancelButton")},200),this.closeDialog()},clickConfirm:function(){var t=this;setTimeout(function(){t.$emit("confirmButton")},200),this.closeDialog()},closeDialog:function(){this.isShow=!1}}};e.default=i},"1c96":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=l(a("8a33")),n=l(a("b26a")),o=l(a("b24f")),s=l(a("2851")),r=l(a("538f")),c=l(a("74d0"));function l(t){return t&&t.__esModule?t:{default:t}}var d={components:{newHead:i.default,lvvPopup:n.default,cashChange:o.default,upgradeBounced:s.default,freeCoupons:r.default,xyDialog:c.default},data:function(){return{paytype:null,zfbstime:null,weixintime:null,membership:!0,showDialog_1:!1,control:!0}},computed:{cashow:function(){return this.$store.state.mian.cashshow},memberlist:function(){var t=this.$store.state.login.logindata;return console.log("会员信息1："+JSON.stringify(this.$store.state.login.logindata)),t},retada:function(){return console.log("商品数据集合:"+JSON.stringify(this.$store.state.mian.intodata)),this.$store.state.mian.intodata},total:function(){return this.$store.state.mian.settlementInitialization},upgradeshow:function(){return this.$store.state.mian.upgradeshow},couponingshow:function(){return this.$store.state.mian.couponingshow}},methods:{cashpay:function(){var t=this.paytype[3].id;this.qiesettlementInitialization(t),this.$store.commit("mian/cashshow",!0)},toshow:function(){this.$refs.lvvpopref.show()},qieh:function(){try{t.removeStorageSync("storage_key"),t.navigateTo({url:"../login/login"})}catch(e){}},membershipPayment:function(){var e=this.paytype[0].id;if(this.qiesettlementInitialization(e),console.log("会员卡之前判断："+this.$store.state.mian.member),1==this.membership)if(null!=this.$store.state.mian.member){var a={payTypeCode:this.paytype[0].payTypeCode,payTypeId:this.paytype[0].id};this.paysuan("",a),this.membership=!1}else this.membershipPaymentpa();else{t.showToast({title:"请不要频繁点击",icon:"none",duration:2e3});var i=this;setTimeout(function(){i.membership=!0},1500)}},scanningControl:function(e){1==this.control?this.payment(e):t.showToast({title:"请不要频繁点击",icon:"none",duration:2e3});var a=this;setTimeout(function(){a.control=!0},1500)},payment:function(e){var a={},i="";"MEMBER_CARD"==e?(a={payTypeCode:this.paytype[0].payTypeCode,payTypeId:this.paytype[0].id},i=this.paytype[0].id,this.qiesettlementInitialization(i)):"ZFB"==e?(a={payTypeCode:this.paytype[1].payTypeCode,payTypeId:this.paytype[1].id},i=this.paytype[1].id,this.qiesettlementInitialization(i)):"WEIXIN"==e&&(a={payTypeCode:this.paytype[2].payTypeCode,payTypeId:this.paytype[2].id},i=this.paytype[2].id,this.qiesettlementInitialization(i));var n=this;n.control=!1,t.scanCode({success:function(t){n.paysuan(t.result,a)},fail:function(t){console.log("扫描二维码失败："+t)}})},paysuan:function(e,a){var i=this;t.showLoading({title:"支付中..."});var n=this.$store.state.mian.settlementInitialization.init_money;this.$http.post("pc/posPayment/posPaymentAction",{payTypeCode:a.payTypeCode,payTypeId:a.payTypeId,posTicketCode:this.$store.state.mian.intodata.data.list[0].pos_ticket_code,state:10,payMoney:n,posTicketType:10,restingOrderType:10,sysParamId:"",authCode:e,memberPwd:"",manualDiscount:0,manualDiscountPassword:"",isInputMember:"",isNoMemberToPay:3}).then(function(e){"ZFB"==a.payTypeCode?i.ZHBpay(e.data.data.tradeNo):"MEMBER_CARD"==a.payTypeCode?(console.log("会员卡支付之后："+JSON.stringify(e.data)),t.hideLoading(),0==e.data.status?(null==e.data.moreInfo&0==e.data.extendData.length&&(i.showDialog_1=!0),i.favorableUpgrade(e.data),i.$store.state.mian.member=null,i.$http.get("pc/posRestingOrder/initAutoPosRestingOrder",{state:10,posTicketType:10,payTypeId:""}).then(function(t){i.$store.commit("mian/intodata",t.data),i.$store.commit("mian/intodata",null),i.$store.commit("mian/goodlist",null),i.membership=!0})):t.showToast({title:"支付失败",icon:"none",duration:2e3})):"WEIXIN"==a.payTypeCode&&("SUCCESS"==e.data.data.resultCode&&0!=e.data.data.isCallNotify?null!=e.data.data.errCodeDes?t.showToast({title:e.data.data.errCodeDes,icon:"none",duration:3e3}):i.WEIXINpay(e.data.data.tradeNo):"SUCCESS"==e.data.data.resultCode&&0==e.data.data.isCallNotify?(console.log("微信支付快捷通道"+JSON.stringify(e.data.data.data)),t.hideLoading(),i.favorableUpgrade(e.data.data),i.$store.state.mian.member=null,i.$http.get("pc/posRestingOrder/initAutoPosRestingOrder",{state:10,posTicketType:10,payTypeId:""}).then(function(t){i.$store.commit("mian/intodata",t.data),i.$store.commit("mian/intodata",null),i.$store.commit("mian/goodlist",null)}),null==e.data.data.moreInfo&null==e.data.data.extendData&&(i.showDialog_1=!0)):t.showToast({title:"支付异常",icon:"none",duration:2e3}))})},ZHBpay:function(e){t.showLoading({title:"支付中..."});var a=this,i=this.$store.state.mian.zfbstime;i=setInterval(function(){a.$http.get("pc/pay/zfb/orderQuery2/"+a.$store.state.mian.intodata.data.list[0].pos_ticket_code+"?tradeNo="+e).then(function(e){null==e.data?clearInterval(i):0==e.data.status?(console.log("支付支付状态："+JSON.stringify(e.data)),"TRADE_SUCCESS"==e.data.data.tradeStatus?(t.hideLoading(),null==e.data.data.moreInfo&null==e.data.data.extendData&&(a.showDialog_1=!0),a.favorableUpgrade(e.data.data),a.$store.state.mian.member=null,a.$http.get("pc/posRestingOrder/initAutoPosRestingOrder",{state:10,posTicketType:10,payTypeId:""}).then(function(t){a.$store.commit("mian/intodata",t.data),a.$store.commit("mian/intodata",null),a.$store.commit("mian/goodlist",null)}),clearInterval(i)):"WAIT_BUYER_PAY"==e.data.data.tradeStatus||("TRADE_CLOSED"==e.data.data.tradeStatus?(clearInterval(i),t.showToast({title:"交易关闭",icon:"none",duration:2e3})):"TRADE_FINISHED"==e.data.data.tradeStatus?(clearInterval(i),t.showToast({title:"支付异常",icon:"none",duration:2e3})):clearInterval(i))):clearInterval(i)})},1e3)},WEIXINpay:function(e){t.showLoading({title:"支付中..."});var a=this;this.weixintime=setInterval(function(){a.$http.get("pc/pay/wx/wxPay/orderQuery2"+a.$store.state.mian.intodata.data.list[0].pos_ticket_code+"?tradeNo="+e).then(function(e){console.log("微信支付轮询通道"+JSON.stringify(e.data)),null==e.data?clearInterval(a.weixintime):"SUCCESS"==e.data.data.tradeState?(t.hideLoading(),null==e.data.data.moreInfo&null==e.data.data.extendData&&(a.showDialog_1=!0),a.favorableUpgrade(e.data.data),a.$store.state.mian.member=null,a.$http.get("pc/posRestingOrder/initAutoPosRestingOrder",{state:10,posTicketType:10,payTypeId:""}).then(function(e){a.$store.commit("mian/intodata",e.data),a.$store.commit("mian/intodata",null),a.$store.commit("mian/goodlist",null),null!=a.$store.state.mian.upgrade&&""!=a.$store.state.mian.upgrade||null!=a.$store.state.mian.couponing&&""!=a.$store.state.mian.couponing&&0!=a.$store.state.mian.couponing.length||setTimeout(function(){t.redirectTo({url:"../index/index"})},1e3)}),clearInterval(a.weixintime)):"REFUND"==e.data.data.tradeState?(clearInterval(a.weixintime),t.showToast({title:"转入退款",icon:"none",duration:2e3})):"NOTPAY"==e.data.data.tradeState?(clearInterval(a.weixintime),t.showToast({title:"未支付",icon:"none",duration:2e3})):"CLOSED"==e.data.data.tradeState?(clearInterval(a.weixintime),t.showToast({title:"已关闭",icon:"none",duration:2e3})):"REVOKED"==e.data.data.tradeState?(clearInterval(a.weixintime),t.showToast({title:"已撤销",icon:"none",duration:2e3})):"USERPAYING"==e.data.data.tradeState||("PAYERROR"==e.data.data.tradeState?(clearInterval(a.weixintime),t.showToast({title:"支付失败",icon:"none",duration:2e3})):(clearInterval(a.weixintime),t.showToast({title:e.data.data.errCodeDes,icon:"none",duration:2e3})))})},1e3)},Payments:function(){var t=this;this.$http.get("pc/payType/getPayTypeList").then(function(e){console.log("获取支付方式："+JSON.stringify(e.data)),t.paytype=e.data.data,t.$store.commit("mian/paytype",e.data.data),t.settlementInitialization()})},membershipPaymentpa:function(){var e=this;t.scanCode({success:function(a){console.log("条码内容："+a.result);var i=a.result;"HY"==i.substring(0,2)&&16==i.length?e.memberLogin(i):t.showToast({title:"会员不存在",icon:"none",duration:2e3})},fail:function(t){console.log("扫描二维码失败："+t)}})},memberLogin:function(t){var e=this,a="";null!=this.$store.state.mian.intodata&&(a=0==this.$store.state.mian.intodata.data.list.length?"":this.$store.state.mian.intodata.data.list[0].pos_ticket_code),this.$http.post("pc/pos/ticketSearch",{search:t,posTicketCode:a,level2TypeId:"",pageSize:10,pageIndex:1}).then(function(t){var a=e.paytype[0].id;e.qiesettlementInitialization(a),0==t.data.status&&(e.$store.commit("mian/member",t.data),e.initi())})},initi:function(){var t=this;this.$http.get("pc/posRestingOrder/initAutoPosRestingOrder",{state:10,posTicketType:10,posTicketCode:""}).then(function(e){t.$store.commit("mian/intodata",e.data);var a={payTypeCode:t.paytype[0].payTypeCode,payTypeId:t.paytype[0].id};t.paysuan("",a)})},settlementInitialization:function(){var t=this,e="";null!=this.$store.state.mian.intodata&&(e=this.$store.state.mian.intodata.data.list[0].pos_ticket_code),this.$http.post("pc/posPayment/initPosPaymentAction",{payTypeId:this.paytype[0].id,state:10,posTicketCode:e,posTicketType:10,restingOrderType:10}).then(function(e){t.$store.commit("mian/settlementInitialization",e.data.data)})},qiesettlementInitialization:function(t){var e=this,a="";null!=this.$store.state.mian.intodata&&(a=this.$store.state.mian.intodata.data.list[0].pos_ticket_code),this.$http.post("pc/posPayment/initPosPaymentAction",{payTypeId:t,state:10,posTicketCode:a,posTicketType:10,restingOrderType:10}).then(function(t){e.$store.commit("mian/settlementInitialization",t.data.data)})},favorableUpgrade:function(t){this.$store.commit("mian/upgrade",t.memberInfo),this.$store.commit("mian/couponing",t.extendData),null!=this.$store.state.mian.upgrade&&""!=this.$store.state.mian.upgrade?this.$store.commit("mian/upgradeshow",!0):null!=this.$store.state.mian.couponing&&""!=this.$store.state.mian.couponing&&0!=this.$store.state.mian.couponing.length&&this.$store.commit("mian/couponingshow",!0)},clickConfirm:function(e){this.showDialog_1=!1,t.redirectTo({url:"../index/index"})}},mounted:function(){this.Payments()}};e.default=d}).call(this,a("543d")["default"])},"1cd6":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"robstamap"},[t._m(0),a("view",{staticStyle:{width:"100%","min-height":"312.5rpx","max-height":"412.5rpx",background:"#f64c5e","margin-top":"-1.041666rpx"}},[null!=t.freedata&&""!=t.freedata&&0!=t.freedata.length?a("view",{staticStyle:{"font-size":"37.5rpx",color:"#fffaf5","font-family":"PingFangSC-Medium","text-align":"center"}},[t._v("恭喜您获得"+t._s(t.freedata.length)+"张优惠券")]):t._e(),null!=t.freedata&&""!=t.freedata&&0!=t.freedata.length?a("view",{staticStyle:{width:"625rpx","min-height":"157.5rpx","max-height":"300rpx",overflow:"auto",background:"#fffaf5","border-radius":"4.166666rpx",margin:"41.666666rpx auto 0rpx"}},t._l(t.freedata,function(e,i){return a("view",{key:i},[a("view",{staticStyle:{width:"100%",height:"0.041666rpx"}}),a("view",{staticStyle:{width:"583.333333rpx",height:"125rpx",background:"#080808",margin:"15rpx auto 5rpx",position:"relative"}},[a("image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.url}}),a("view",{staticStyle:{position:"absolute",width:"263.541666rpx",height:"36.458333rpx",left:"168.541666rpx",bottom:"20.833333rpx"}},[a("text",{staticStyle:{"font-family":"PingFangSC-Regular","font-size":"29.166666rpx",color:"#f96c1d"}},[t._v(t._s(e.denomination))]),a("text",{staticStyle:{"font-family":"PingFangSC-Regular","font-size":"18.75rpx",color:"#666666","margin-left":"10.416666rpx"}},[t._v(t._s(e.startTime)+"--"+t._s(e.endTime))])])])])})):t._e(),a("view",{staticStyle:{width:"100%",height:"10.416666rpx"}})]),a("view",{staticStyle:{width:"59.375rpx",height:"59.375rpx",margin:"31.25rpx auto 0rpx"}},[a("image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"../../static/index/close.png",eventid:"63b88a92-0"},on:{click:t.close}})])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticStyle:{width:"100%",height:"311.458333rpx"}},[a("image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"../../static/index/tan.png"}})])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},2329:function(t,e,a){"use strict";a.r(e);var i=a("313a"),n=a("85a8");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("8158");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"6251bc5e",null);e["default"]=r.exports},2851:function(t,e,a){"use strict";a.r(e);var i=a("7c20"),n=a("8626");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("4c90");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"4e51a4c2",null);e["default"]=r.exports},"313a":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",[a("view",{attrs:{id:"newhead1"}},[a("view",[a("image",{staticClass:"httle",attrs:{src:"../../static/index/brush_3.png",mode:""}}),a("image",{staticClass:"log",attrs:{src:"../../static/login/logo.png",mode:"",eventid:"6f3d177a-0"},on:{click:t.toshow}}),a("text",{staticClass:"title"},[t._v("POS手机版")])]),a("lvv-popup",{ref:"lvvpopref",attrs:{position:"left",mpcomid:"6f3d177a-0"}},[a("view",{staticStyle:{background:"#f5f3ef",width:"458.333333rpx",height:"100%",position:"absolute",left:"0"}},[a("view",{staticClass:"acctionf"},[a("view",{staticStyle:{width:"100%",height:"155.416666rpx",background:"#0e2223","text-align":"center","line-height":"155.416666rpx"}},[a("image",{staticStyle:{width:"216.666666rpx",height:"83.333333rpx","margin-top":"52.083333rpx"},attrs:{src:"../../static/login/logo.png",mode:""}})]),a("view",{staticClass:"lvvtitle"},[t._v("门店： "+t._s(t.memberlist.departmentName))]),a("view",{staticStyle:{width:"458.333333rpx",height:"1.041666rpx",background:"#eae6e2"}}),a("view",{staticClass:"lvvtitle"},[t._v("账号: "+t._s(t.memberlist.userCode))]),a("view",{staticStyle:{width:"458.333333rpx",height:"1.041666rpx",background:"#eae6e2"}}),a("button",{staticClass:"btn",attrs:{type:"primary",eventid:"6f3d177a-1"},on:{click:t.qieh}},[t._v("切换用户")]),a("view",{staticClass:"lvvtitle",staticStyle:{position:"fixed",bottom:"5.25rpx","text-align":"center",width:"458.333333rpx","font-size":"25rpx"}},[t._v("新仙C果版权所有")])],1)])])],1),a("view",{staticClass:"shomian"},[a("image",{staticClass:"bacimg",attrs:{src:"../../static/login/background.png",mode:""}}),a("image",{staticClass:"tishi",attrs:{src:"../../static/index/price_tag.png",mode:""}}),a("view",{staticClass:"tishi",staticStyle:{"line-height":"132.291666rpx","font-size":"29.166666rpx",color:"#be0000","text-align":"center"}},[t._v("合计："),null!=t.total?a("text",{staticStyle:{"font-size":"58.333333rpx"}},[t._v(t._s(t.total.init_money))]):t._e()]),a("image",{staticClass:"goodimg",attrs:{src:"../../static/index/pay.png",mode:""}})]),a("view",{staticClass:"botmm"},[a("image",{staticClass:"img",attrs:{src:"../../static/index/brush_4.png",mode:""}}),a("image",{staticClass:"styled fa1",attrs:{src:"../../static/index/pay_treasure_blue_2.png",mode:"",eventid:"6f3d177a-2"},on:{click:function(e){t.scanningControl("ZFB")}}}),a("image",{staticClass:"styled fa2",attrs:{src:"../../static/index/wechat_green_2.png",mode:"",eventid:"6f3d177a-3"},on:{click:function(e){t.scanningControl("WEIXIN")}}}),a("image",{staticClass:"styled fa3",attrs:{src:"../../static/index/card_yellow_2.png",mode:"",eventid:"6f3d177a-4"},on:{click:t.membershipPayment}}),a("image",{staticClass:"styled fa4",attrs:{src:"../../static/index/cash.png",mode:"",eventid:"6f3d177a-5"},on:{click:t.cashpay}}),a("text",{staticClass:"stytext tex1",attrs:{eventid:"6f3d177a-6"},on:{click:function(e){t.scanningControl("ZFB")}}},[t._v("支付宝")]),a("text",{staticClass:"stytext tex2",attrs:{eventid:"6f3d177a-7"},on:{click:function(e){t.scanningControl("WEIXIN")}}},[t._v("微信")]),a("text",{staticClass:"stytext tex3",attrs:{eventid:"6f3d177a-8"},on:{click:t.membershipPayment}},[t._v("会员")]),a("text",{staticClass:"stytext tex4",attrs:{eventid:"6f3d177a-9"},on:{click:t.cashpay}},[t._v("现金")]),a("image",{staticClass:"fe1",attrs:{src:"../../static/index/fen.png",mode:""}}),a("image",{staticClass:"fe2",attrs:{src:"../../static/index/fen.png",mode:""}}),a("image",{staticClass:"fe3",attrs:{src:"../../static/index/fen.png",mode:""}})]),a("view",{directives:[{name:"show",rawName:"v-show",value:t.cashow,expression:"cashow"}]},[a("cashChange",{attrs:{mpcomid:"6f3d177a-1"}})],1),a("view",{directives:[{name:"show",rawName:"v-show",value:t.upgradeshow,expression:"upgradeshow"}]},[a("upgradeBounced",{attrs:{mpcomid:"6f3d177a-2"}})],1),a("view",{directives:[{name:"show",rawName:"v-show",value:t.couponingshow,expression:"couponingshow"}]},[a("freeCoupons",{attrs:{mpcomid:"6f3d177a-3"}})],1),a("view",[a("xyDialog",{attrs:{title:"状态",content:"支付成功!欢迎下次光临~",show:t.showDialog_1,isShowCancel:!1,eventid:"6f3d177a-10",mpcomid:"6f3d177a-4"},on:{confirmButton:function(e){t.clickConfirm(1)}}})],1)])},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},3310:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{}},computed:{ipdataimg:function(){return this.$store.state.mian.upgrade}},methods:{close:function(){this.$store.commit("mian/upgradeshow",!1),null!=this.$store.state.mian.couponing&&""!=this.$store.state.mian.couponing&&0!=this.$store.state.mian.couponing.length?this.$store.commit("mian/couponingshow",!0):t.redirectTo({url:"../index/index"})}}};e.default=a}).call(this,a("543d")["default"])},3844:function(t,e,a){},"408b":function(t,e,a){"use strict";a.r(e);var i=a("c509"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},"448f":function(t,e,a){},"4c90":function(t,e,a){"use strict";var i=a("deeb"),n=a.n(i);n.a},"538f":function(t,e,a){"use strict";a.r(e);var i=a("1cd6"),n=a("d054");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("a4ad");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"913e9366",null);e["default"]=r.exports},5671:function(t,e,a){"use strict";a.r(e);var i=a("1659"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},"6cef":function(t,e,a){"use strict";a("34b9");var i=o(a("b0ce")),n=o(a("2329"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(n.default))},"6d6b":function(t,e,a){},"74d0":function(t,e,a){"use strict";a.r(e);var i=a("824c"),n=a("5671");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("0eb6");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=r.exports},"7c20":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",[a("view",{staticClass:"updiv"}),a("view",{staticClass:"upgradmianp"},[a("view",{staticClass:"upgradmian"},[null!=t.ipdataimg&&""!=t.ipdataimg?a("image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.ipdataimg,mode:""}}):t._e()]),a("view",{staticClass:"close"},[a("image",{staticStyle:{width:"62.5rpx",height:"62.5rpx",margin:"0rpx 219.895833rpx"},attrs:{src:"../../static/index/close.png",mode:"",eventid:"34d389cf-0"},on:{click:t.close}})])])])},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},8158:function(t,e,a){"use strict";var i=a("0a9b"),n=a.n(i);n.a},"824c":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"xy-dialog",class:{"xy-dialog__show":t.isShow},attrs:{eventid:"109bbe61-2"},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),t.bindTouchmove(e)}}},[a("view",{staticClass:"xy-dialog__mask"}),a("view",{staticClass:"xy-dialog__container"},[t.title.length>0?a("view",{staticClass:"xy-dialog__header"},[t._v(t._s(t.title))]):t._e(),a("view",{staticClass:"xy-dialog__content",style:{"text-align":t.textalign}},[t.content?[a("view",{staticClass:"modal-content"},[t._v(t._s(t.content))])]:[t._t("default",null,{mpcomid:"109bbe61-0"})]],2),a("view",{staticClass:"xy-dialog__footer"},[t.isShowCancel?a("view",{staticClass:"xy-dialog__btn xy-dialog__footer-cancel",style:{color:t.cancelColor},attrs:{eventid:"109bbe61-0"},on:{click:t.clickCancel}},[t._v(t._s(t.cancelText))]):t._e(),a("view",{staticClass:"xy-dialog__btn xy-dialog__footer-confirm",class:[t.isShowCancel?"":"xy-dialog__btn-row"],style:{color:t.confirmColor},attrs:{eventid:"109bbe61-1"},on:{click:t.clickConfirm}},[t._v(t._s(t.confirmText))])])])])},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},"85a8":function(t,e,a){"use strict";a.r(e);var i=a("1c96"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},8626:function(t,e,a){"use strict";a.r(e);var i=a("3310"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},"8f0e":function(t,e,a){"use strict";var i=a("6d6b"),n=a.n(i);n.a},a4ad:function(t,e,a){"use strict";var i=a("3844"),n=a.n(i);n.a},b24f:function(t,e,a){"use strict";a.r(e);var i=a("065a"),n=a("408b");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("8f0e");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"0f237ad2",null);e["default"]=r.exports},c509:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,n=o(a("74d0"));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var r={components:{xyDialog:n.default},data:function(){return{shumoyr:"",theAmount:0,showDialog_1:!1}},computed:{amountChange:{get:function(){return this.shumoyr},set:function(t){this.theAmount=(Number(t)-Number(this.$store.state.mian.settlementInitialization.init_money)).toFixed(1),this.shumoyr=t}},total:function(){return this.$store.state.mian.settlementInitialization}},methods:(i={close:function(){console.log("关闭时获取支付方式："+JSON.stringify(this.$store.state.mian.paytype)),this.qiesettlementInitialization(this.$store.state.mian.paytype[0].id),this.$store.commit("mian/cashshow",!1)},qiesettlementInitialization:function(t){var e=this,a="";null!=this.$store.state.mian.intodata&&(a=this.$store.state.mian.intodata.data.list[0].pos_ticket_code),this.$http.post("pc/posPayment/initPosPaymentAction",{payTypeId:t,state:10,posTicketCode:a,posTicketType:10,restingOrderType:10}).then(function(t){e.$store.commit("mian/settlementInitialization",t.data.data)})},cashpay:function(){var e=this,a=this.$store.state.mian.paytype[3].payTypeCode,i=this.$store.state.mian.paytype[3].id;this.$http.post("pc/posPayment/posPaymentAction",{payTypeCode:a,payTypeId:i,posTicketCode:this.$store.state.mian.intodata.data.list[0].pos_ticket_code,state:10,payMoney:this.shumoyr,posTicketType:10,restingOrderType:10,sysParamId:"",authCode:"",memberPwd:"",manualDiscount:0,manualDiscountPassword:"",isInputMember:"",isNoMemberToPay:3}).then(function(a){console.log("现金结算完成之后1："+JSON.stringify(a.data)),0==a.data.status&&(a.data.data>0||0==a.data.data)?(null==a.data.moreInfo&&null==a.data.extendData?e.showDialog_1=!0:null==a.data.moreInfo&&0==a.data.extendData.length?e.showDialog_1=!0:e.$store.commit("mian/cashshow",!1),console.log("现金结算完成之后2："+(null==a.data.moreInfo&&null==a.data.extendData)),e.favorableUpgrade(a.data),e.$store.state.mian.member=null,e.$http.get("pc/posRestingOrder/initAutoPosRestingOrder",{state:10,posTicketType:10,payTypeId:""}).then(function(t){e.$store.commit("mian/intodata",t.data),e.$store.commit("mian/intodata",null),e.$store.commit("mian/goodlist",null)})):0==a.data.status&&a.data.data<0?(t.showToast({title:"支付成功",icon:"success",duration:2e3}),e.shumoyr="",e.qiesettlementInitialization(i)):t.showToast({title:"支付失败",icon:"none",duration:2e3})})}},s(i,"qiesettlementInitialization",function(t){var e=this,a="";null!=this.$store.state.mian.intodata&&(a=this.$store.state.mian.intodata.data.list[0].pos_ticket_code),this.$http.post("pc/posPayment/initPosPaymentAction",{payTypeId:t,state:10,posTicketCode:a,posTicketType:10,restingOrderType:10}).then(function(t){null!=t.data&&e.$store.commit("mian/settlementInitialization",t.data.data)})}),s(i,"favorableUpgrade",function(t){this.$store.commit("mian/upgrade",t.memberInfo),this.$store.commit("mian/couponing",t.extendData),null!=this.$store.state.mian.upgrade&&""!=this.$store.state.mian.upgrade?this.$store.commit("mian/upgradeshow",!0):null!=this.$store.state.mian.couponing&&""!=this.$store.state.mian.couponing&&0!=this.$store.state.mian.couponing.length&&this.$store.commit("mian/couponingshow",!0)}),s(i,"clickConfirm",function(e){this.showDialog_1=!1,this.$store.commit("mian/cashshow",!1),t.redirectTo({url:"../index/index"})}),i)};e.default=r}).call(this,a("543d")["default"])},d054:function(t,e,a){"use strict";a.r(e);var i=a("1080"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},deeb:function(t,e,a){}},[["6cef","common/runtime","common/vendor"]]]);